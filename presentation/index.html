<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Spring Basics Training</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

        <link rel="stylesheet" href = "http://slidifylibraries2.googlecode.com/git/inst/libraries/widgets/bootstrap/css/bootstrap.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<!-- Introduction -->
				<section>
					<section>
						<h1>Spring Basics Training</h1>
						<p>
							<small>
								<a href="https://andifalk.github.io/spring-basics-training/presentation/index.html">https://andifalk.github.io/
									<br>spring-basics-training/ presentation/index.html</a>
							</small>
						</p>
						<img src="images/spring-logo.png" class="plain" width="30%">
					</section>
					<section>
						<h3>Andreas Falk</h3>
						<h4>NovaTec Consulting GmbH</h4>
						andreas.falk@novatec-gmbh.de
						<br>@NT_AQE, @andifalk
						<p><img class="plain" src="images/profile.png" width="53%"></p>
					</section>
				</section>

                <!-- Spring History -->
                <section>
                    <section>
                        <h2>A little bit of history</h2>
                        <img src="images/spring-logo.png" class="plain" width="30%">
                    </section>
                    <section>
                        <h1>2002</h1>
                        <p>Rod Johnson had an idea and wrote a book: <br>&ldquo;J2EE Design & Development&rdquo;</p>
                        <p>First source code available</p>
                        <img src="images/j2ee_design_development.jpg" class="plain" width="25%">
                    </section>
                    <section>
                        <h1>2004</h1>
                        <p>Published Spring 1.0</p>
                        <p>Java 1.3 & 1.4 compatible</p>
                        <img src="images/spring_release1.png" class="plain" width="50%">
                    </section>
                    <section>
                        <h1>2006-2009</h1>
                        <p>Spring 2.x</p>
                        <p>Java 5 & 6 compatible</p>
                        <p>Java EE 5 compliant</p>
                    </section>
                    <section>
                        <h1>2009-2013</h1>
                        <p>Spring 3.x</p>
                        <p>Java 6 & 7 compatible</p>
                        <p>Java EE 6 compliant</p>
                        <p>Rod Johnson leaves Sping</p>
                        <p>Founded Pivotal</p>
                    </section>
                    <section>
                        <h1>2014-2017</h1>
                        <p>Spring 4.x</p>
                        <p>Java 7 & 8 compatible</p>
                        <p>Java EE 6 & 7 compliant</p>
                        <p>Published Spring Boot 1.0 (2014)</p>
                    </section>
                    <section>
                        <h1>2018, 2019, ...</h1>
                        <p>Spring 5.x</p>
                        <p>Spring Boot 2.0</p>
                        <p>Java 8+ compatible</p>
                        <p>Java EE 7+ compliant</p>
                    </section>
                </section>

                <!-- Spring Overview -->
                <section>
                    <section>
                        <h1>Spring Overview</h1>
                    </section>
                    <section>
                        <h3>Spring IO Platform</h3>
                        <img src="images/spring_platform.png" class="plain" width="68%">
                    </section>
                    <section>
                        <h2>Spring Boot</h2>
                        <p>Spring Auto-Configuration</p>
                        <p>&ldquo;Convention over Configuration&rdquo;</p>
                        <img src="images/spring-boot-logo.png" class="plain" width="30%">
                        <br><small><a href="https://projects.spring.io/spring-boot/">https://projects.spring.io/spring-boot</a></small>
                    </section>
                    <section>
                        <h2>Spring Boot</h2>
                        <p>Build a working Spring App in 5 minutes</p>
                        <img src="images/spring_initializr.png" class="plain" width="90%">
                        <br><small><a href="https://start.spring.io">https://start.spring.io</a></small>
                    </section>
                    <section>
                        <h2>Spring Cloud Data Flow</h2>
                        <p>Successor of Spring XD</p>
                        <p>Toolkit for building data integration and real-time data processing pipelines</p>
                        <p>Pipelines consist of Spring Boot apps</p>
                        <br><small><a href="https://start.spring.io">https://start.spring.io</a></small>
                    </section>
                    <section>
                        <h2>Spring Cloud</h2>
                        <p>Patterns for Cloud-Native Applications</p>
                        <p>Configuration management</p>
                        <p>Service discovery</p>
                        <p>Circuit breakers</p>
                        <br><small><a href="https://projects.spring.io/spring-cloud/">https://projects.spring.io/spring-cloud</a></small>
                    </section>
                    <section>
                        <h2>Spring Integration</h2>
                        <p>Implementation of well-known EAI Patterns</p>
                        <p>Integration with External Systems</p>
                        <p>ReST/HTTP, Twitter, EMail, JMS, FTP, ...</p>
                        <img src="images/eai_book.png" class="plain" width="23%">
                        <br><small><a href="https://projects.spring.io/spring-integration">https://projects.spring.io/spring-integration</a></small>
                    </section>
                    <section>
                        <h2>Spring Kafka</h2>
                        <p>Developing Kafka-based messaging solutions</p>
                        <p>Adds Kafka support to Spring Integration</p>
                        <br><small><a href="https://projects.spring.io/spring-kafka/">https://projects.spring.io/spring-kafka</a></small>
                    </section>
                    <section>
                        <h2>Spring Batch</h2>
                        <p>Developing batch processing applications</p>
                        <p>Chunk based processing</p>
                        <p>Start/Stop/Restart</p>
                        <p>Retry/Skip</p>
                        <br><small><a href="https://projects.spring.io/spring-batch/">https://projects.spring.io/spring-batch</a></small>
                    </section>
                    <section>
                        <h2>Spring Web</h2>
                        <p>Servlet-based Web (Spring MVC)</p>
                        <p>Reactive Web (Spring WebFlux)</p>
                        <p>Restful services</p>
                        <p>Thymeleaf, JSF, Tapestry, ...</p>
                        <br><small><a href="https://projects.spring.io/spring-framework/">https://projects.spring.io/spring-framework</a></small>
                    </section>
                    <section>
                        <h1>Spring Data</h1>
                    </section>
                    <section>
                        <h2>Spring Data JDBC</h2>
                        <p>JDBC based repositories</p>
                        <p>This is NOT an ORM</p>
                        <p>Support for @Query annotations</p>
                        <br><small><a href="https://projects.spring.io/spring-data-jdbc/">https://projects.spring.io/spring-data-jdbc</a></small>
                    </section>
                    <section>
                        <h2>Spring Data JPA</h2>
                        <p>Enhanced support for JPA based data access layers</p>
                        <p>Supports Hibernate, EclipseLink as JPA providers</p>
                        <p>Pagination support, dynamic query execution</p>
                        <br><small><a href="https://projects.spring.io/spring-data-jpa/">https://projects.spring.io/spring-data-jpa</a></small>
                    </section>
                    <section>
                        <h2>Spring Data JPA</h2>
                        <h3>Automatic Database Migrations</h3>
                        <img src="images/flyway.png" class="plain" width="40%">
                        <img src="images/liquibase.png" class="plain" width="40%">
                        <br><small><a href="https://flywaydb.org">https://flywaydb.org</a></small>
                        <br><small><a href="https://www.liquibase.org">https://www.liquibase.org</a></small>
                    </section>
                    <section>
                        <h2>Spring Data MongoDB</h2>
                        <p>Data access for MongoDB document database</p>
                        <p>Mongo Template support</p>
                        <p>POJO centric model for interacting with a MongoDB DBCollection</p>
                        <br><small><a href="https://projects.spring.io/spring-data-mongodb/">https://projects.spring.io/spring-data-mongodb</a></small>
                    </section>
                    <section>
                        <h2>Spring Data Redis</h2>
                        <p>Redis Template support</p>
                        <p>Repository for key/value store</p>
                        <br><small><a href="https://projects.spring.io/spring-data-redis">https://projects.spring.io/spring-data-redis</a></small>
                    </section>
                    <section>
                        <h2>Spring Framework</h2>
                        <p>Core spring functionality</p>
                        <p>Application context & Beans</p>
                        <p>Dependency Injection</p>
                        <br><small><a href="https://projects.spring.io/spring-framework/">https://projects.spring.io/spring-framework</a></small>
                    </section>
                    <section>
                        <h2>Spring Framework</h2>
                        <h3>Version 3.2.x</h3>
                        <p>&ldquo;Legacy&rdquo;</p>
                        <p>Supports Java 6 / 7</p>
                        <p>EOL: End of 2016</p>
                        <br><small><a href="https://spring.io/blog/2015/06/15/spring-framework-3-2-x-eol-on-dec-31-2016">https://spring.io/blog/2015/06/15/spring-framework-3-2-x-eol-on-dec-31-2016</a></small>
                    </section>
                    <section>
                        <h2>Spring Framework</h2>
                        <h3>Version 4.3.x</h3>
                        <p>Long term version</p>
                        <p>Supports Java 6 / 7 / 8</p>
                        <p>EOL: 2020</p>
                        <br><small><a href="https://github.com/spring-projects/spring-framework/wiki">https://github.com/spring-projects/spring-framework/wiki</a></small>
                    </section>
                    <section>
                        <h2>Spring Framework</h2>
                        <h3>Version 5.0</h3>
                        <p>Current version</p>
                        <p>Supports Java 8 / 9 / 10+</p>
                        <br><small><a href="https://github.com/spring-projects/spring-framework/wiki">https://github.com/spring-projects/spring-framework/wiki</a></small>
                    </section>
                    <section>
                        <h2>Spring Security</h2>
                        <p>Authentication</p>
                        <p>SSO (OAuth2, OpenID Connect)</p>
                        <p>Authorization</p>
                        <p>Encryption</p>
                        <br><small><a href="https://projects.spring.io/spring-security/">https://projects.spring.io/spring-security</a></small>
                    </section>
                    <section>
                        <h2>Reactor</h2>
                        <p>Reactive library for building non-blocking applications</p>
                        <p>Based on Reactive Streams Specification</p>
                        <p>Base library for Spring WebFlux (Spring 5)</p>
                        <br><small><a href="https://projectreactor.io/">https://projectreactor.io</a></small>
                        <br><small><a href="https://www.reactive-streams.org/">https://www.reactive-streams.org</a></small>
                    </section>
                    <section>
                        <h1>Cloud Platform Support</h1>
                    </section>
                    <section>
                        <h2>Azure Cloud</h2>
                        <img src="images/spring_boot_azure.png" class="plain">
                    </section>
                    <section>
                        <h2>Google Cloud</h2>
                        <img src="images/spring_boot_google.png" class="plain">
                    </section>
                    <section>
                        <h2>Spring Cloud Pipelines</h2>
                        <p>Don't reinvent CI/CD pipelines for each project</p>
                        <p>Provide templates with best practices for common deployment pipelines</p>
                        <p>Supports Jenkins and Concourse CI</p>
                        <br><small><a href="https://cloud.spring.io/spring-cloud-pipelines/">https://cloud.spring.io/spring-cloud-pipelines</a></small>
                    </section>
                </section>

                <!-- Spring Overview -->
                <section>
                    <section>
                        <h1>Spring Core Framework</h1>
                        <img src="images/spring-logo.png" class="plain" width="25%">
                    </section>
                    <section>
                        <h2>Simplify Java (Kotlin) Development (Part 1)</h2>
                        <p>Lightweight development with POJOs</p>
                        <p>Loose coupling through Dependency Injection</p>
                    </section>
                    <section>
                        <h2>Lightweight Development</h2>
                        <h3>Plain Old Java Objects</h3>
                        <h4>vs.</h4>
                        <h3>Enterprise Java Beans (1.x)</h3>
                    </section>
                    <section>
                        <h2>EJB 1.1</h2>
                        <img src="images/pojo_ejb.png" class="plain">
                    </section>
                    <section>
                        <h2>Spring POJO</h2>
                        <img src="images/pojo.png" class="plain">
                    </section>
                    <section>
                        <h1>Dependency Injection (DI)</h1>
                    </section>
                    <section>
                        <h2>SOLID</h2>
                        <p style="color: darkblue"><strong style="font-size: 1.5em">S</strong>ingle Responsibility Principle</p>
                        <p style="color: darkblue"><strong style="font-size: 1.5em">O</strong>pen/Closed Principle</p>
                        <p style="color: darkblue"><strong style="font-size: 1.5em">L</strong>iskov's Substitution Principle</p>
                        <p style="color: darkblue"><strong style="font-size: 1.5em">I</strong>nterface Segregation Principle</p>
                        <p style="color: red"><strong style="font-size: 1.5em">D</strong>ependency Inversion Principle</p>
                    </section>
                    <section>
                        <h2>Dependency Inversion Principle</h2>
                        <p><em>Depend on abstractions, not on concretions</em></p>
                        <img src="images/dependency_inversion.png" class="plain">
                    </section>
                    <section>
                        <h2>Inversion of Control Patterns</h2>
                        <p>Service Locator</p>
                        <p>Dependency Injection</p>
                        <br><small><a href="https://martinfowler.com/articles/injection.html">https://martinfowler.com/articles/injection.html</a></small>
                    </section>
                    <section>
                        <h2>JSR 330 Dependency Injection</h2>
                        <pre><code class="xml" data-trim>
                            &lt;dependency&gt;
                                &lt;groupId&gt;javax.inject&lt;/groupId&gt;
                                &lt;artifactId&gt;javax.inject&lt;/artifactId&gt;
                                &lt;version&gt;1&lt;/version&gt;
                            &lt;/dependency&gt;
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Inject
                            public void setMyService(MyService myService) {
                               ...
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Spring Dependency Injection</h2>
                        <pre><code class="java" data-trim>
                            @Autowired
                            public void setMyService(MyService myService) {
                               ...
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h2>Spring Core Modules</h2>
                        <img src="images/spring_core_modules.png" class="plain">
                    </section>
                    <section>
                        <h2>Spring Core Module Libraries</h2>
                        <img src="images/spring-module-libs.png" class="plain">
                        <p><small><a href="https://dzone.com/articles/automatic-module-name-calling-all-java-library-maintainers">Spring 5: Mapped as Java 9 Automatic Modules</a></small></p>
                    </section>

                    <section>
                        <h1>Beans & Contexts</h1>
                    </section>
                    <section data-background="images/javaee_app_server_container.png" data-background-size="80%">
                    </section>
                    <section data-background="images/spring_container.png" data-background-size="80%">
                    </section>
                    <section>
                        <h2>Application Context</h2>
                        <img src="images/application_context.png" class="plain">
                    </section>
                    <section>
                        <h2>Spring Bean Configuration</h2>
                        <p>XML</p>
                        <p>Java Configuration</p>
                        <p>Annotations (Component Scan)</p>
                    </section>
                    <section>
                        <h2>XML Configuration</h2>
                    </section>
                    <section>
                        <h4>A simple Spring Bean</h4>
                        <pre><code class="java" data-trim>
                            public interface BeanOne {
                                String whoAmI();
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public class BeanOneImpl implements BeanOne {

                                private final BeanTwo beanTwo;

                                public BeanOneImpl(BeanTwo beanTwo) {
                                    this.beanTwo = beanTwo;
                                }

                                @Override
                                public String whoAmI() {
                                    return BeanOneImpl.class.getSimpleName()
                                                + ": " + beanTwo.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h4>XML Application Context</h4>
                        <pre><code class="xml" data-trim>
                            &lt;beans&gt;
                                &lt;bean id="beanOne" class="com.example.beans.BeanOneImpl"&gt;
                                    &lt;constructor-arg ref="beanTwo"/&gt;
                                &lt;/bean&gt;
                                &lt;bean id="beanTwo" class="com.example.beans.BeanTwoImpl"&gt;
                                &lt;/bean&gt;
                            &lt;/beans&gt;
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public class XmlApplication {

                                public static void main(String[] args) {
                                    ApplicationContext ctx =
                                            new ClassPathXmlApplicationContext(
                                                "application.xml");
                                    BeanOne beanOne = ctx.getBean(BeanOne.class);
                                    beanOne.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h2>Java Configuration</h2>
                    </section>
                    <section>
                        <h4>Another simple Spring Bean</h4>
                        <pre><code class="java" data-trim>
                            public interface BeanOne {
                                String whoAmI();
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public class BeanOneImpl implements BeanOne {
                                private final BeanTwo beanTwo;

                                @Autowired
                                public BeanOneImpl(BeanTwo beanTwo) {
                                    this.beanTwo = beanTwo;
                                }

                                @Override
                                public String whoAmI() {
                                    return BeanOneImpl.class.getSimpleName()
                                                + ": " + beanTwo.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h4>Java Application Context</h4>
                        <pre><code class="java" data-trim>
                            @Configuration
                            public class ApplicationConfiguration {
                                @Bean
                                public BeanOne beanOne() {
                                    return new BeanOneImpl(beanTwo());
                                }
                                @Bean
                                public BeanTwo beanTwo() {
                                    return new BeanTwoImpl(...);
                                }
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public class JavaApplication {

                                public static void main(String[] args) {
                                    ApplicationContext ctx
                                            = new AnnotationConfigApplicationContext(
                                                    ApplicationConfiguration.class);
                                    BeanOne beanOne = ctx.getBean(BeanOne.class);
                                    beanOne.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h2>Component Scan Configuration</h2>
                    </section>
                    <section>
                        <h4>Another simple Spring Bean</h4>
                        <pre><code class="java" data-trim>
                            public interface BeanOne {
                                String whoAmI();
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Component
                            public class BeanOneImpl implements BeanOne {
                                private final BeanTwo beanTwo;

                                @Autowired
                                public BeanOneImpl(BeanTwo beanTwo) {
                                    this.beanTwo = beanTwo;
                                }
                                @Override
                                public String whoAmI() {
                                    return BeanOneImpl.class.getSimpleName()
                                                + ": " + beanTwo.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h4>Java Application Context</h4>
                        <pre><code class="java" data-trim>
                            @ComponentScan(basePackages = "com.example")
                            @Configuration
                            public class ApplicationConfiguration {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public class JavaApplication {

                                public static void main(String[] args) {
                                    ApplicationContext ctx
                                            = new AnnotationConfigApplicationContext(
                                                    ApplicationConfiguration.class);
                                    BeanOne beanOne = ctx.getBean(BeanOne.class);
                                    beanOne.whoAmI();
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Annotations</h2>
                        <p>@Component</p>
                        <p>@Configuration</p>
                        <p>@Service</p>
                        <p>@Repository</p>
                        <p>@Controller</p>
                        <p>@RestController</p>
                        <p><small><a href="https://github.com/spring-projects/spring-framework/wiki/Spring-Annotation-Programming-Model">Spring Annotation Programming Model</a></small></p>
                    </section>

                    <section>
                        <h2>Composed Annotations</h2>
                        <pre><code class="java" data-trim>
                            @Transactional
                            @Service
                            @Target(TYPE)
                            @Retention(RUNTIME)
                            @Documented
                            public @interface TransactionalService {
                                ...
                                @AliasFor(annotation = Transactional.class,
                                    attribute = "propagation")
                                Propagation propagation() default Propagation.REQUIRED;
                            }
                        </code></pre>
                        <p><small><a href="https://github.com/sbrannen/spring-composed">https://github.com/sbrannen/spring-composed</a></small></p>
                    </section>

                    <section>
                        <h1>Spring Lifecycle</h1>
                    </section>
                    <section>
                        <h2>Starting Lifecycle</h2>
                        <img src="images/spring_lifecycle_start.png" class="plain" width="85%">
                    </section>
                    <section>
                        <h2>Stopping Lifecycle</h2>
                        <img src="images/spring_lifecycle_stop.png" class="plain" width="90%">
                    </section>
                    <section>
                        <h3>Lifecycle & SmartLifecycle</h3>
                        <pre><code class="java" data-trim>
                           public interface Lifecycle {
                               void start();
                               void stop();
                               boolean isRunning();
                           }
                        </code></pre>
                        <pre><code class="java" data-trim>
                           public interface Phased {
                               int getPhase();
                           }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            public interface SmartLifecycle extends Lifecycle, Phased {
                               boolean isAutoStartup();
                               void stop(Runnable callback);
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h1>Bean Scopes</h1>
                    </section>
                    <section>
                        <h2>General Bean Scopes</h2>
                        <p>Singleton</p>
                        <p>Prototype</p>
                    </section>
                    <section>
                        <h2>Singleton Scope</h2>
                        <img src="images/scope_singleton.png" class="plain">
                    </section>
                    <section>
                        <h2>Prototype Scope</h2>
                        <img src="images/scope_prototype.png" class="plain">
                    </section>
                    <section>
                        <h2>Web Bean Scopes</h2>
                        <p>Request</p>
                        <p>Session</p>
                        <p>Global Session</p>
                        <p>Application</p>
                    </section>

                    <section>
                        <h2>Simplify Java (Kotlin) Development (Part 2)</h2>
                        <p>Declarative programming</p>
                        <p>Eliminating boilerplate code</p>
                        <p>Great testing support</p>
                    </section>

                    <section>
                        <h1>Declarative Programming</h1>
                    </section>
                    <section>
                        <h2>Declarative Cross-Cutting Concerns</h2>
                        <p>Aspect-Oriented Programming (AOP)</p>
                        <p>Transaction Management</p>
                        <p>Security</p>
                        <p>Logging</p>
                    </section>
                    <section>
                        <h3>Declarative Transaction & Authorization</h3>
                        <pre><code class="java" data-trim>
                            @Service
                            public class TaskService {
                                ...
                                @Transactional(propagation = Propagation.REQUIRES_NEW)
                                @PreAuthorize("hasRole('USER')")
                                public Task createTask(
                                   ...
                                }
                                ...
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h3>Aspect-Oriented Programming</h3>
                        <img src="images/aop.png" class="plain">
                    </section>
                    <section>
                        <h2>Spring AOP vs. AspectJ</h2>
                        <img src="images/spring_aop_aspectj.png" class="plain">
                    </section>
                    <section>
                        <h2>AspectJ Advice Annotations</h2>
                        <p>@Before</p>
                        <p>@AfterReturning</p>
                        <p>@AfterThrowing</p>
                        <p>@After</p>
                        <p>@Around</p>
                    </section>
                    <section>
                        <h3>Configure AspectJ Annotations Support</h3>
                        <pre><code class="xml" data-trim>
                            &lt;dependency&gt;
                               &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
                               &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
                               &lt;version&gt;1.9.0&lt;/version&gt;
                            &lt;/dependency&gt;
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @SpringBootApplication
                            @EnableAspectJAutoProxy
                            public class SpringComponentsApplication {
                                public static void main(String[] args) {
                                    SpringApplication.run(
                                        SpringComponentsApplication.class, args);
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h3>A Logging Aspect</h3>
                        <pre><code class="java" data-trim>
                            @Component
                            @Aspect
                            public class LoggingAspect {
                            static final Logger LOG = LoggerFactory.getLogger(
                                                        LoggingAspect.class);
                               @Around("execution(* person.PersonService.*(..))")
                               public Object logAction (ProceedingJoinPoint pjp)
                                                        throws Throwable {
                                  LOG.info("Calling {}.{}",
                                    pjp.getTarget().getClass().getName(),
                                    pjp.getSignature().getName());
                                  return proceedingJoinPoint.proceed();
                               }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h1>Eliminate Boilerplate Code</h1>
                    </section>
                    <section>
                        <h2>Pure JDBC Code</h2>
                        <pre><code class="java" data-trim>
                           public List&lt;Person&gt; findAll() {
                               List&lt;Person&gt; result = new ArrayList<>();
                               try (Connection conn = dataSource.getConnection()) {
                                  statement = conn.prepareStatement(
                                                "select * from person");
                                  rs = statement.executeQuery();
                                  while (rs.next()) {
                                     person = new Person();
                                     …
                                     result.add(person);
                                  }
                               } catch (SQLException e) {…} finally {}
                               return result;
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>JDBC Template (Java 7)</h2>
                        <pre><code class="java" data-trim>
                           public List&lt;Person&gt; findAll() {
                               return jdbcTemplate.query("select * from person",
                                 new RowMapper&lt;Person&gt;() {
                                    @Override
                                    public Person mapRow(ResultSet arg0, int arg1)
                                            throws SQLException {
                                       Person person = new Person();
                                       …
                                       return person;
                                    }
                                 });
                           }
                        </code></pre>
                    </section>
                    <section>
                        <h2>JDBC Template (Java 8)</h2>
                        <pre><code class="java" data-trim>
                           public List&lt;Person&gt; findAll() {
                               return jdbcTemplate.query("select * from person",
                                      (rs, rowNum) ->  {
                                         Person person = new Person();
                                         …
                                         return person;
                               });
                           }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Other Templates</h2>
                        <p>TransactionTemplate</p>
                        <p>JmsTemplate</p>
                        <p>RestTemplate</p>
                        <p>OAuth2RestTemplate</p>
                        <p>...</p>
                    </section>

                    <section>
                        <h2>Advanced Bean Wiring</h2>
                    </section>

                    <section>
                        <h3>What about multiple candidates?</h3>
                        <pre><code class="java" data-trim>
                            public interface Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Component
                            public class Harddisk implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Component
                            public class CompactDisc implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Service
                            public class BackupManager {
                                private Storage storage;

                                @Autowired
                                public void setStorage(Storage storage) {
                                    this.storage = storage;
                                }
                                ...
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h3>Single Match expected!</h3>
                        <pre><code class="java" data-trim>
                            NoUniqueBeanDefinitionException:
                                No qualifying bean of type 'com.example.beans.Storage'
                                    available: expected single matching bean but found 2:
                                        compactDisc,harddisk
                                at org.springframework.beans.factory.config.
                                        DependencyDescriptor.resolveNotUnique
                                at org.springframework.beans.factory.support.
                                        DefaultListableBeanFactory.doResolveDependency
                                ...
                        </code></pre>
                    </section>

                    <section>
                        <h2>Possible Solutions</h2>
                        <p>@Primary</p>
                        <p>@Qualifier</p>
                        <p>@Profile</p>
                        <p>@Conditional</p>
                    </section>

                    <section>
                        <p>@Primary</p>
                        <pre><code class="java" data-trim>
                            public interface Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Primary @Component
                            public class Harddisk implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Component
                            public class CompactDisc implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Service
                            public class BackupManager {
                                private Storage storage;

                                @Autowired
                                public void setStorage(Storage storage) {
                                    this.storage = storage;
                                }
                                ...
                            }
                        </code></pre>
                    </section>

                    <section>
                        <p>@Qualifier</p>
                        <pre><code class="java" data-trim>
                            public interface Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Qualifier("HD") @Component
                            public class Harddisk implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Qualifier("CD") @Component
                            public class CompactDisc implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Service
                            public class BackupManager {
                                private Storage storage;

                                @Qualifier("CD") @Autowired
                                public void setStorage(Storage storage) {
                                    this.storage = storage;
                                }
                                ...
                            }
                        </code></pre>
                    </section>

                    <section>
                        <p>-Dspring.profiles.active="dev"</p>
                        <pre><code class="java" data-trim>
                            public interface Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Profile("dev") @Component
                            public class Harddisk implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Profile("prod") @Component
                            public class CompactDisc implements Storage {
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Service
                            public class BackupManager {
                                private Storage storage;

                                @Autowired
                                public void setStorage(Storage storage) {
                                    this.storage = storage;
                                }
                                ...
                            }
                        </code></pre>
                    </section>

                    <section>
                        <p>@Conditional</p>
                        <pre><code class="java" data-trim>
                            @Target({ElementType.TYPE, ElementType.METHOD})
                            @Retention(RetentionPolicy.RUNTIME)
                            @Documented
                            @Conditional(ProfileCondition.class)
                            public @interface Profile {...}
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @Target({ ElementType.TYPE, ElementType.METHOD })
                            @Retention(RetentionPolicy.RUNTIME)
                            @Documented
                            @Conditional(OnClassCondition.class)
                            public @interface ConditionalOnClass {...}
                        </code></pre>
                        <pre><code class="java" data-trim>
                            package org.springframework.boot.autoconfigure.orm.jpa;

                            @Configuration
                            @ConditionalOnClass({ ..., EntityManager.class })
                            @Conditional(HibernateEntityManagerCondition.class)
                            public class HibernateJpaAutoConfiguration {...}
                        </code></pre>
                    </section>

                    <section>
                        <h2>Spring Expression Language (SpEL)</h2>
                    </section>
                    <section>
                        <pre><code class="xml" data-trim>
                            &lt;bean id="numberGuess" class="com.example.NumberGuess"&gt;
                                &lt;property
                                    name="randomNumber"
                                    value="#{T(java.lang.Math).random() * 100.0}"/&gt;
                            &lt;/bean&gt;
                            &lt;bean id="shapeGuess" class="com.example.ShapeGuess"&gt;
                                &lt;property
                                    name="initialShapeSeed"
                                    value="#{ numberGuess.randomNumber }"/&gt;
                        </code></pre>
                        <pre><code class="java" data-trim>
                            ExpressionParser parser = new SpelExpressionParser();
                            Expression expression = parser.parseExpression(
                               "T(java.lang.Math).random() * 100.0");
                            double value = (Double) expression.getValue();
                        </code></pre>
                    </section>

                </section>

                <!-- Microservices -->

                <section>
                    <section>
                        <h1>Microservices</h1>
                        &ldquo;Agile SOA&rdquo;
                        <p><small><a href="http://isa-principles.org">http://isa-principles.org</a></small></p>
                        <img src="images/microservices.png" class="plain" width="40%">
                    </section>
                    <section>
                        <h2>The Well Defined Monolith</h2>
                        <img src="images/monolith_modularized.png" class="plain">
                    </section>
                    <section>
                        <h2>&ldquo;Big Ball Of Mud&rdquo; Monolith</h2>
                        <img src="images/monolith_ball_of_mud.png" class="plain">
                    </section>
                    <section>
                        <h2>From Monolith to Microservices</h2>
                        <img src="images/monolith_microservices.png" class="plain">
                    </section>
                    <section>
                        <h2>Autonomic Microservices</h2>
                        <img src="images/autonomic_microservices.png" class="plain">
                    </section>
                    <section>
                        <img src="images/microservice_scaling.png" class="plain">
                    </section>
                    <section>
                        <img src="images/microservices_resilience.png" class="plain">
                    </section>
                    <section>
                        <img src="images/microservice_eventual_consistency.png" class="plain">
                    </section>
                    <section>
                        <h2>CI Pipelines for Microservices</h2>
                        <img src="images/microservices_ci_pipeline.png" class="plain">
                    </section>
                    <section>
                        <h2>Size of Microservices (I)</h2>
                        <img src="images/microservice_size.png" class="plain">
                    </section>
                    <section>
                        <h2>Size of Microservices (II)</h2>
                        <img src="images/microservice_bounded_contexts.png" class="plain">
                    </section>
                    <section>
                        <h2>Size of Microservices (III)</h2>
                        <img src="images/microservice_dev_teams.png" class="plain">
                    </section>
                    <section>
                        <h2>Size of Microservices (IV)</h2>
                        <img src="images/microservice_natural_size.png" class="plain">
                    </section>
                </section>

                <!-- Cloud Native -->
                <section>
                    <section>
                        <h1>Cloud Native</h1>
                        <p><img src="images/12factor.png" class="plain" width="50%"></p>
                    </section>
                    <section>
                        <h2>Cloud Native (I)</h2>
                        &ldquo;Cloud-native is an approach to building and running applications that fully exploits the advantages of the cloud computing delivery model.&rdquo;
                        <p><small><a href="https://pivotal.io/cloud-native">pivotal.io</a></small></p>
                    </section>
                    <section>
                        <h2>Cloud Native (II)</h2>
                        <h4>The Twelve Factory App</h4>
                        <p><img src="images/12factor.png" class="plain" width="90%"></p>
                        <p><small><a href="https://12factor.net">https://12factor.net</a></small></p>
                    </section>
                    <section>
                        <h2>Cloud Native (III)</h2>
                        <h4>On Premise</h4>
                        <h4>Infrastructure as a service (IaaS)</h4>
                        <h4>Platform as a service (PaaS)</h4>
                        <h4>Software as a service (SaaS)</h4>
                        <h4>Function as a service (FaaS)</h4>
                    </section>
                    <section>
                        <h2>Cloud Native (IV)</h2>
                        <p><img src="images/cloud_service_models.png" class="plain" width="80%"></p>
                    </section>
                    <section>
                        <h2>Spring Cloud Native Stack</h2>
                        <p><img src="images/cloud_native_stack.png" class="plain" width="80%"></p>
                    </section>
                </section>

                <!-- Spring Boot -->
                <section>
                    <section>
                        <h1>Spring Boot</h1>
                        <img src="images/spring-boot-logo.png" class="plain" width="25%">
                    </section>
                    <section>
                        <p>https://start.spring.io</p>
                        <p><img src="images/start_spring_io.png" width="100%"></p>
                    </section>
                    <section>
                        <h2>Spring CLI</h2>
                        <p><a href="http://start.spring.io/spring.zip">https://start.spring.io/spring.zip</a></p>
                        <pre><code class="bash" data-trim>
                            $ spring init -d=web,security,jpa --build=gradle my-dir
                            Using service at https://start.spring.io
                            Project extracted to '/home/my-user/my-dir'
                        </code></pre>
                    </section>
                    <section>
                        <h2>Spring Boot Components</h2>
                        <p><img src="images/spring_boot_components.png" class="plain"></p>
                    </section>
                    <section>
                        <h2>Auto Configuration</h2>
                        <p><img src="images/spring_auto_config.png" class="plain" width="80%"></p>
                    </section>
                    <section>
                        <h2>Spring Boot Application</h2>
                        <pre><code class="java" data-trim>
                            package org.springframework.boot.autoconfigure;

                            ...
                            @SpringBootConfiguration
                            @EnableAutoConfiguration
                            @ComponentScan
                            public @interface SpringBootApplication {
                                ...
                            }
                        </code></pre>
                        <pre><code class="java" data-trim>
                            @SpringBootApplication
                            public class MyApplication {

                                public static void main(String[] args) {
                                    SpringApplication.run(
                                         MyApplication.class, args);
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Auto Configuration</h2>
                        <pre><code class="java" data-trim>
                            @Configuration
                            @ConditionalOnClass(Flyway.class)
                            @ConditionalOnBean(DataSource.class)
                            @ConditionalOnProperty(prefix = "spring.flyway",
                                name = "enabled", matchIfMissing = true)
                            @AutoConfigureAfter({ DataSourceAutoConfiguration.class,
                            HibernateJpaAutoConfiguration.class })
                            public class FlywayAutoConfiguration {
                                ...
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Deactivate Auto Configuration</h2>
                        <pre><code class="java" data-trim>
                            @SpringBootApplication (
                              exclude = DataSourceAutoConfiguration.class)
                            public class MyApplication {

                                public static void main(String[] args) {
                                    SpringApplication.run(
                                         MyApplication.class, args);
                                }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h1>Externalize Configuration</h1>
                    </section>
                    <section>
                        <h2>Application Properties</h2>
                        <pre><code class="properties" data-trim>
                            spring.application.name=My App
                            spring.main.show-banner=false
                            server.port=8080
                            spring.datasource.jdbc-url=jdbc:h2:mydb
                            spring.datasource.username=sa
                        </code></pre>
                    </section>
                    <section>
                        <h2>Application Configuration (YAML)</h2>
                        <pre><code class="yaml" data-trim>
                            spring:
                              application:
                                name: My App
                              main:
                                show-banner: false
                              datasource:
                                jdbc-url: jdbc:h2:mydb
                                username: sa
                        </code></pre>
                        <p><small>YAML=YAML Ain't Markup Language</small></p>
                    </section>
                    <section>
                        <h3>More Options</h3>
                        <p><a href="">Configuration Server</a></p>
                        <p><a href="">Vault Cloud</a></p>
                    </section>
                    <section>
                        <h1>DevOps</h1>
                    </section>
                    <section>
                        <h2>Deployment Options</h2>
                        <p>Can be packaged as...</p>
                        <span class="fragment" style="color:darkblue">Executable JAR</span>
                        <span class="fragment">or as...</span>
                        <span class="fragment" style="color:darkblue">(Executable) WAR</span>
                        <p class="fragment" style="color: darkred"><strong>but...</strong></p>
                    </section>
                    <section>
                        <h2>Make JAR not WAR</h2>
                        <p><img src="images/make_jar_not_war.png" width="80%"></p>
                    </section>
                    <section>
                        <h1>Actuators</h1>
                        <h3>Manage and monitor your application</h3>
                    </section>
                    <section>
                        <h3>Exposure via..</h3>
                        <p>HTTP</p>
                        <p>JMX</p>
                    </section>
                    <section>
                        <h3>Actuator Endpoints (Partly)</h3>
                        <table>
                            <thead>
                            <tr>
                                <th>Endpoint</th>
                                <th>Description</th>
                                <th>Enabled</th>
                            </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>beans</td>
                                    <td>List of Spring beans</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>conditions</td>
                                    <td>Evaluated auto-config</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>configprops</td>
                                    <td>List of properties</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>health</td>
                                    <td>Application health info</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>metrics</td>
                                    <td>‘Metrics’ information</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>shutdown</td>
                                    <td>Gracefully shutdown app</td>
                                    <td>No</td>
                                </tr>
                                <tr>
                                    <td>threaddump</td>
                                    <td>Performs a thread dump</td>
                                    <td>Yes</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    <section>
                        <h3>Health Actuator</h3>
                        <p><small><a href="http://localhost:8080/actuator/health">http://localhost:8080/actuator/health</a></small></p>
                        <pre><code class="json" data-trim>
                            {
                              "status": "UP",
                              "details": {
                                "mongo": {
                                  "status": "UP",
                                  "details": {
                                    "version": "3.2.2"
                                  }
                                },
                                "diskSpace": {
                                  "status": "UP",
                                  "details": {
                                    ...
                            }}}}
                        </code></pre>
                    </section>
                    <section>
                        <h3>Custom Health Indicator</h3>
                        <pre><code class="java" data-trim>
                            @Component
                            public class BlobStorageHealthEndpoint
                                    implements HealthIndicator {

                                private CloudBlobClient cloudBlobClient;
                                ...

                                @Override
                                public Health health() {
                                    Health.Builder builder = Health.up();
                                    ...
                                    return builder.build();
                                }
                            }
                        </code></pre>
                    </section>
                </section>

                <!-- Spring Web -->
                <section>
                    <section>
                        <h1>Spring Web</h1>
                    </section>
                    <section>
                        <h3>Spring Web Stacks</h3>
                        <br><img src="images/diagram-boot-reactor.svg" class="plain" width="65%">
                    </section>
                </section>

                <!-- Spring Data -->
                <section>
                    <section>
                        <h1>Spring Data</h1>
                    </section>
                    <section>
                        <p><img src="images/spring_data_modules.png" class="plain"></p>
                    </section>
                    <section>
                        <p><img src="images/spring_data_more_modules.png" class="plain"></p>
                    </section>
                    <section>
                        <p><img src="images/spring_data_repository_ddd.png" class="plain"></p>
                    </section>
                    <section>
                        <h3>Data Access Abstraction</h3>
                        <pre><code class="java" data-trim>
                            @Service
                            public class PersonServiceImpl implements PersonService {
                               @Autowired private PersonRepository personRepository;

                               @Override
                               public List&lt;Person&gt; findAll() {
                                  return personRepository.findAll();
                               }
                            }
                        </code></pre>
                        <img src="images/spring_data_repository_abstraction.png" class="plain" width="80%">
                    </section>
                    <section>
                        <p><img src="images/spring_data_repository_hierarchy.png" class="plain"></p>
                    </section>
                    <section>
                        <p><img src="images/spring_data_jpa_modules.png" class="plain"></p>
                    </section>
                    <section>
                        <p><img src="images/jpa_entity_hierarchy.png" class="plain"></p>
                    </section>
                    <section>
                        <h3>JPA Entity</h3>
                        <pre><code class="java" data-trim>
                            @Entity
                            public class Person
                                    extends AbstractPersistable&lt;Long&gt; {

                               private String firstName;
                               private String lastName;
                               private String yearOfBirth;

                               public Person() {
                                  super();
                               }
                               …
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h2>Auditing</h2>
                    </section>
                    <section>
                        <h3>Auditor</h3>
                        <pre><code class="java" data-trim>
                            public class SpringSecurityAuditorAware
                               implements AuditorAware&lt;User&gt; {

                               @Override
                               public User getCurrentAuditor() {
                                  Authentication authentication =
                                     SecurityContextHolder
                                        .getContext ().getAuthentication ();
                                     …
                               }
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h3>Audited JPA Entity</h3>
                        <pre><code class="java" data-trim>
                            @Entity
                            public class Person
                                extends AbstractAuditable&lt;User,Long&gt;  {

                               private String firstName;
                               private String lastName;
                               private String yearOfBirth;
                               …

                            }
                        </code></pre>
                    </section>
                    <section>
                        <p><img src="images/spring_data_jpa_repositories.png" class="plain"></p>
                    </section>
                    <section>
                        <h3>CRUD Repository</h3>
                        <p>Create/Read/Update/Delete</p>
                        <pre><code class="java" data-trim>
                            public interface CrudRepository&lt;T, ID&gt;
                                    extends Repository&lt;T, ID&gt; {
                                ...
                                &lt;S extends T&gt; S save(S entity);
                                Optional&lt;T&gt; findById(ID id);
                                Iterable&lt;T&gt; findAll();
                                long count();
                                boolean existsById(ID id);
                                void delete(T entity);
                                ...
                            }
                        </code></pre>
                    </section>
                    <section>
                        <h3>Autogenerated Simple Queries</h3>
                        <p>findByLastName()</p>
                        <p>findByLastNameAndFirstName()</p>
                        <p>findByFirstNameIgnoreCaseOrderByFirstName()</p>
                        …
                    </section>
                    <section>
                        <h3>Custom Queries</h3>
                        <pre><code class="java" data-trim>
                            public interface PersonRepository extends
                               JpaRepository&lt;Person, Long&gt; {

                                ...

                               @Query("SELECT p FROM #{#entityName} p LEFT JOIN FETCH "
                                            + "p.addresses WHERE p.id = :id")
                                  Person findOneWithAddresses(@Param("id") Long id);
                            }
                        </code></pre>
                    </section>
                </section>

                <!-- Spring Security -->
                <section>
                    <section>
                        <h1>Spring Security</h1>
                    </section>
                    <section>
                        <h1>Spring Security</h1>
                        <h2>Secure By Default</h2>
                        <p class="fragment">Authentication required for all HTTP endpoints</p>
                        <p class="fragment">Session Fixation Protection</p>
                        <p class="fragment">Session Cookie (HttpOnly, Secure)</p>
                        <p class="fragment">CSRF Protection</p>
                        <p class="fragment">Security Response Headers</p>
                    </section>
                    <section>
                        <h1>New in Spring Security 5</h1>
                        <p class="fragment">Support for Reactive Web Applications</p>
                        <p class="fragment">Support for OAuth 2.0 Client</p>
                        <p class="fragment">Support for OpenID Connect 1.0, JWT and JOSE (JWS/JWE/JWK) Client</p>
                    </section>
                    <section>
                        <h1>Authentication</h1>
                        <h2>Who am I?</h2>
                        <img src="images/detective.png" class="plain" width="30%">
                        <h3>HTTP 401 - Unauthorized</h3>
                    </section>
                    <section>
                        <h2>Basic Authentication</h2>
                        <pre><code class="http" data-trim>
                            GET / HTTP/1.1
                            Host: localhost:8080
                        </code></pre>
                        <pre><code class="http" data-trim>
                            HTTP/1.1 401
                            WWW-Authenticate: Basic realm="hello"
                        </code></pre>
                        <pre><code class="http" data-trim>
                            GET / HTTP/1.1
                            Host: localhost:8080
                            Authorization: Basic dXNlcjpzZWNyZXQ=
                        </code></pre>
                    </section>
                    <section>
                        <h2>Form Based Login</h2>
                        <pre><code class="http" data-trim>
                            POST /login HTTP/1.1
                            Host: localhost:8080
                            Content-Type: application/x-www-form-urlencoded
                            Cookie: JSESSIONID=14965E3A995DA1973F42F308D59727D4

                            username=user&password=secret&submit=Login
                        </code></pre>
                        <pre><code class="http" data-trim>
                            HTTP/1.1 302
                            Set-Cookie: JSESSIONID=49C632387800316021BE804AB2F27C15;
                                            Path=/; HttpOnly
                        </code></pre>
                        <pre><code class="http" data-trim>
                            GET / HTTP/1.1
                            Host: localhost:8080
                            Cookie: JSESSIONID=49C632387800316021BE804AB2F27C15
                        </code></pre>
                    </section>
                    <section>
                        <h2>Bearer Token</h2>
                        <ul>
                            <li>OAuth2</li>
                            <li>OpenID Connect</li>
                        </ul>
                        <pre><code class="http" data-trim>
                            GET / HTTP/1.1
                            Host: localhost:8080
                            Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiI
                        </code></pre>
                    </section>
                    <section>
                        <h2>Other Authentication Mechanisms</h2>
                        <ul>
                            <li>X.509 Client Certificate</li>
                            <li>SAML 2</li>
                            <li>API Token</li>
                            <li>...</li>
                        </ul>
                    </section>
                    <section>
                        <h2>Authentication</h2>
                        <h4>Stateful or Stateless?</h4>
                        <table>
                            <thead>
                            <tr>
                                <th>Session Cookie</th>
                                <th>Token (Bearer, JWT)</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>With each Request <br>(on same domain)</td>
                                <td>Manually as Header</td>
                            </tr>
                            <tr>
                                <td>Potential CSRF!</td>
                                <td>No CSRF possible</td>
                            </tr>
                            <tr>
                                <td>One domain</td>
                                <td>Cross domain (CORS)</td>
                            </tr>
                            <tr>
                                <td>Sensitive Info (HTTPS)</td>
                                <td>Sensitive Info (HTTPS)</td>
                            </tr>
                            </tbody>
                        </table>
                    </section>
                    <section>
                        <h1>HTTPS (SSL / TLS) !!</h1>
                        <h3>Validation (Destination Host)</h3>
                        <h3>Data Confidentiality (Encryption)</h3>
                        <h3>Data Integrity (Hashing)</h3>
                    </section>
                    <section>
                        <h2>HTTPS (SSL / TLS) !!</h2>
                        <p>
                            <a href="https://letsencrypt.org/">Let's Encrypt</a><br>
                            <a href="https://www.cloudflare.com/">CloudFlare</a><br>
                            <a href="https://http2.github.io/">HTTP/2</a>
                        </p>
                        <img src="images/chrome-not-secure.gif" width="62%" class="plain">
                    </section>
                    <section>
                        <h3>OAuth 2 = Authorization</h3>
                        <img src="images/oauth_roles.png" class="plain">
                        <br>
                        <small>
                            <a href="https://tools.ietf.org/html/rfc6749">https://tools.ietf.org/html/rfc6749</a>
                        </small>
                    </section>
                    <section>
                        <h3>OpenID Connect = Authenticaton</h3>
                        <img src="images/openid_roles.png" class="plain">
                        <br>
                        <small>
                            <a href="https://openid.net/specs/openid-connect-core-1_0.html">https://openid.net</a>
                        </small>
                    </section>
                    <section>
                        <h3>JSON Web token (JWT)</h3>
                        <h4>Base 64 Encoded JSON Formatted Value of...</h4>
                        <p class="fragment">...Header</p>
                        <p class="fragment">...Payload</p>
                        <p class="fragment">...Signature</p>
                        <pre><code class="http" data-trim>
                            GET / HTTP/1.1
                            Host: localhost:8080
                            Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1N...
                        </code></pre>
                    </section>
                    <section>
                        <h3>JSON Web Token (JWT)</h3>
                        <p>Header</p>
                        <pre><code class="json" data-trim>
                            {
                              typ: "JWT",
                              alg: "RS256"
                            }
                        </code></pre>
                        <p>Payload</p>
                        <pre><code class="json" data-trim>
                            {
                              iss: "https://identity.example.com",
                              aud: "my-client-id",
                              exp: 1495782385,
                              nonce: "N0.46824857243233511495739124749",
                              iat: 1495739185,
                              at_hash: "hC1NDSB8WZ9SnjXTid175A",
                              sub: "mysubject",
                              auth_time: 1495739185,
                              email: "test@gmail.com"
                            }
                        </code></pre>
                    </section>
                    <section>
                        <img src="images/oauth_spring_roles.png" class="plain">
                        <br>
                        <small>
                            <a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-security-oauth2">http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-security-oauth2</a>
                        </small>
                    </section>
                    <section>
                        <h1>Authorization</h1>
                        <h2>What can I access?</h2>
                        <img src="images/tampons.jpg" class="plain" width="45%">
                        <h3>HTTP 403 - Forbidden</h3>
                    </section>
                    <section>
                        <h2>Authorization of REST API</h2>
                        <h3>Role based</h3>
                        <pre><code class="java" data-trim contenteditable>
                            public class UserBoundaryService {

                                @PreAuthorize("hasRole('ADMIN')")
                                public List&lt;User&gt; findAllUsers() {...}

                            }
				    	</code></pre>
                    </section>
                    <section>
                        <h2>Authorization of REST API</h2>
                        <h3>Permission based</h3>
                        <pre><code class="java" data-trim contenteditable>
                            public class TaskBoundaryService {

                                @PreAuthorize("hasPermission(#taskId, 'TASK', 'WRITE')")
                                public Task findTask(UUID taskId) {...}

                            }
					    </code></pre>
                    </section>
                    <section>
                        <h2>Authorization of REST API</h2>
                        <h3>Integration Test</h3>
                        <pre><code class="java" data-trim contenteditable>
                            public class AuthorizationIntegrationTest {

                                @WithMockUser(roles = "ADMIN")
                                @Test
                                public void verifyFindAllUsersAuthorized() {...}

                                @WithMockUser(roles = "USER")
                                @Test(expected = AccessDeniedException.class)
                                public void verifyFindAllUsersUnauthorized() {...}
                            }
					    </code></pre>
                    </section>
                </section>

                <!-- Spring Test -->
                <section>
                    <section>
                        <h1>Spring Test</h1>
                    </section>
                    <section>
                        <h2>Test Pyramid</h2>
                        <p><img src="images/test_pyramid.png" class="plain"></p>
                    </section>
                    <section>
                        <h2>Why Unit Tests?</h2>
                        <p><img src="images/unit_test_fast_feedback.png" class="plain"></p>
                    </section>
                    <section>
                        <h2>What is a Unit Test?</h2>
                        <p>White Box Test</p>
                        <p>Runs Fast (only some milliseconds)</p>
                        <p>Tests Public API methods in a single class</p>
                        <p>Uses Mocking</p>
                        <p><img src="images/junit_mockito.png" class="plain" width="30%"></p>
                    </section>
                    <section>
                        <h2>What is a good Unit Test?</h2>
                        <p>Repeatable (with same results)</p>
                        <p>Isolated/Independent</p>
                        <p>May Run Parallelized</p>
                    </section>

                    <section>
                        <h3>&ldquo;AAA&rdquo; Unit Test Structure</h3>
                        <pre><code class="java" data-trim>
                            public class HelloWorldTest {
                                private HelloWorld cut;

                                @Before // --> Arrange
                                public void setUp() {
                                    cut = new HelloWorld();
                                }

                                @Test
                                public void verifySayHello() {
                                    String greeting = cut.sayHello("World"); // --> Act
                                    assertThat("Should have got expected greeting",
                                            greeting, is("Hallo World")); // --> Assert
                            } }
                        </code></pre>
                    </section>

                    <section>
                        <h2>Assertion Matchers</h2>
                        <p><a href="http://hamcrest.org/">Hamcrest Matchers</a></p>
                        <p><a href="https://joel-costigliola.github.io/assertj/">AssertJ Matchers</a></p>
                    </section>

                    <section>
                        <h2>Hamcrest Matching</h2>
                        <pre><code class="java" data-trim>
                            import static org.hamcrest.Matchers.*;

                            assertThat(frodo.getName(), is(equalTo(myBiscuit)));
                            assertThat(frodo.getName(), is(not(equalTo(myBiscuit))));

                            assertThat(frodo.getName(), startsWith("Fro"));
                            assertThat(frodo.getName(), endsWith("do"));
                            assertThat(frodo.getName(),
                                            is(equalToIgnoringCase("frodo")));

                            assertThat(fellowshipOfTheRing.size()), is(equalTo(9));
                            assertThat(fellowshipOfTheRing), hasItems(frodo, sam));
                            assertThat(fellowshipOfTheRing), not(hasItem(sauron));
                        </code></pre>
                    </section>

                    <section>
                        <h2>AssertJ Matching</h2>
                        <pre><code class="java" data-trim>
                            import static org.assertj.core.api.Assertions.*;

                            assertThat(frodo.getName()).isEqualTo("Frodo");
                            assertThat(frodo).isNotEqualTo(sauron);

                            assertThat(frodo.getName()).startsWith("Fro")
                                                       .endsWith("do")
                                                       .isEqualToIgnoringCase("frodo");

                            assertThat(fellowshipOfTheRing).hasSize(9)
                                                           .contains(frodo, sam)
                                                           .doesNotContain(sauron);
                        </code></pre>
                    </section>

                    <section>
                        <h2>Mocking</h2>
                        <p><img src="images/mocking.png" class="plain"></p>
                    </section>

                    <section>
                        <h2>Mock Types</h2>
                        <p>Dummy</p>
                        <p>Fake</p>
                        <p>Mock</p>
                        <p>Spy</p>
                    </section>

                    <section>
                        <h2>Mockito</h2>
                        <p>Simple API</p>
                        <p>Provides Mock and Spy</p>
                        <p>Supports Call Verification</p>
                        <p>Also mocks final/static methods (Mockito 2)</p>
                        <br><small><a href="http://site.mockito.org/">http://site.mockito.org</a></small>
                    </section>

                    <section>
                        <h2>Mockito Sample</h2>
                        <pre><code class="java" data-trim>
                            @RunWith(MockitoJUnitRunner.class)
                            public class PersonServiceMockTest {
                                @Mock
                                private PersonDao personDao;
                                @InjectMocks
                                private PersonService cut;
                                @Test
                                public void verifySomething() {
                                    when(personDao.findAll()).thenReturn(
                                        Collections.singletonList(
                                             new Person("firstName", "lastName")));
                                    ...
                                }
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h2>Spring Unit Tests</h2>
                        <p>Tests WITHOUT Spring-Container</p>
                        <p>Mocks for PropertySource, Servlets, Reactive Web, ...</p>
                        <p>ReflectionUtils</p>
                        <p><small><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#unit-testing">Spring Framework Reference Docs</a></small></p>
                    </section>

                    <section>
                        <h2>What is a Integration Test?</h2>
                        <p>Integrated test of multiple units</p>
                        <p>Medium runtime (minutes)</p>
                        <p>Tests using external systems</p>
                        <p>Partly uses mocking</p>
                        <p><img src="images/integration_tests.png" class="plain" width="30%"></p>
                    </section>

                    <section>
                        <h2>Spring Integration Tests</h2>
                        <p>Tests WITH Spring-Container</p>
                        <p>SpringJUnitRunner</p>
                        <p>Caching for Spring Contexts</p>
                        <p>Dependency Injection</p>
                        <p>Mocked Beans</p>
                        <p><small><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/testing.html#integration-testing">Spring Framework Reference Docs</a></small></p>
                    </section>

                    <section>
                        <h3>Sample Spring Integration Test</h3>
                        <pre><code class="java" data-trim>
                            @RunWith(SpringJUnitRunner.class)
                            @SpringApplicationConfiguration(classes = Application.class)
                            @TestPropertySource(properties=
                                    {"timezone = GMT", "port: 8081"})
                            @Sql({"/test-schema.sql", "/test-user-data.sql"})
                            @Transactional
                            public class ApplicationTests {
                                @Autowired
                                private ShopManagementService cut;

                                @Test
                                public void verifySomething() { cut.doSomething(); }
                                …
                            }
                        </code></pre>
                    </section>

                    <section>
                        <h3>Spring (Boot) Test Slices</h3>
                        <p>@WebMvcTest</p>
                        <p>@WebFluxTest</p>
                        <p>@DataJpaTest</p>
                        <p>@DataMongoTest</p>
                        <p>@RestClientTest</p>
                        <p>...</p>
                        <p><small><a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-testing">Spring Boot Reference Docs</a></small></p>
                    </section>

                    <section>
                        <h2>Test Driven Development (TDD)</h2>
                        <p><img src="images/tdd_cycle.png" class="plain" width="60%"></p>
                    </section>

                    <section>
                        <h3>TDD Workflows (Martin Fowler)</h3>
                        <p>Cleanup (&ldquo;Boy Scout Rule&rdquo;)</p>
                        <p>Code Comprehension</p>
                        <p>Preparation For New Feature</p>
                        <p>Planned (Long-Term) Refactoring</p>
                        <p><img src="images/refactor_hats_fowler.png" class="plain" width="30%"></p>
                    </section>



                </section>

                <!-- Spring 5 -->
                <section>
                    <section>
                        <h1>Spring Boot 2.0 & Spring 5.0</h1>
                    </section>
                    <section>
                        <h2>What's New?</h2>
                        <p>Infrastructure Updates</p>
                        <p>JUnit 5 Testing Support</p>
                        <p>Functional Container Extensions</p>
                        <p>Reactive Systems / WebFlux</p>
                    </section>
                    <section>
                        <h2>Spring Infrastructure Updates</h2>
                        <p>Java 8 Baseline</p>
                        <p>Java 9 Automatic Modules</p>
                        <p>Java EE 7 Baseline</p>
                        <p>Java EE 8 Support (Servlet 4, Bean Validation 2.0)</p>
                        <p>HTTP/2 Support (Servlet 4)</p>
                    </section>
                    <section>
                        <h2>Spring Boot Infrastructure Updates</h2>
                        <p>Jetty 9.4</p>
                        <p>Tomcat 8.5</p>
                        <p>Hibernate 5.2</p>
                        <p>Hikari Connection Pool</p>
                    </section>
                    <section>
                        <h2>JUnit 5</h2>
                        <p>Test Context Support for JUnit 4 and JUnit 5</p>
                        <p>@SpringJUnitConfig = @ExtendWith(SpringExtension.class) + @ContextConfiguration</p>
                    </section>
                    <section>
                        <h2>Functional Container Extensions</h2>
                        <pre><code class="java" data-trim>
                            GenericApplicationContext ctx
                                = new GenericApplicationContext();

                            // Default constructor via reflection
                            ctx.registerBean(First.class);

                            // Explicit constructor via Supplier
                            ctx.registerBean(Second.class,
                            () -> new Second(ctx.getBean(First.class)));

                            // Explicit constructor with BeanDefinition customization
                            ctx.registerBean(Third.class,
                            () -> new Third(ctx.getBean(First.class)),
                            bd -> bd.setLazyInit(true));
                        </code></pre>
                    </section>
                    <section>
                        <h2>Reactive Systems</h2>
                        &ldquo;Systems that are Responsive, Resilient, Elastic and Message Driven. We call these Reactive Systems.&rdquo;
                        <p><small><a href="https://www.reactivemanifesto.org">The Reactive Manifesto</a></small></p>
                    </section>
                    <section>
                        <h2>Reactive Streams & Backpressure</h2>
                        <p><img src="images/reactive_publisher_subscriber.png" class="plain"></p>
                    </section>
                    <section>
                        <h2>Reactive Systems Implementations</h2>
                        <p><a href="https://akka.io">akka</a></p>
                        <p><a href="https://projectreactor.io">Reactor</a></p>
                        <p><a href="https://github.com/ReactiveX/RxJava">RxJava</a></p>
                    </section>
                    <section>
                        <h3>Spring Web Stacks</h3>
                        <br><img src="images/diagram-boot-reactor.svg" class="plain" width="65%">
                    </section>
                </section>

            </div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies

            Reveal.initialize({
                history: true,
                center: true,
                slideNumber: 'c/t',
                previewLinks: true,

                allottedTime: 60 * 60 * 1000, // 60 minutes

                transition: 'slide', // none/fade/slide/convex/concave/zoom
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js' },
                    { src: 'plugin/markdown/markdown.js' },
                    { src: 'plugin/print-pdf/print-pdf.js' },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true },
                    { src: 'plugin/tagcloud/tagcloud.js', async: true },
                    { src: 'plugin/elapsed-time-bar/elapsed-time-bar.js'},
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() {
                            hljs.initHighlightingOnLoad(); }
                    }
                ]
            });
            Reveal.configure({ slideNumber: 'c/t' });
		</script>
	</body>
</html>
